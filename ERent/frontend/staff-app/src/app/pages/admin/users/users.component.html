<div class="toolbar-card">
  <mat-form-field appearance="outline" class="search-field small">
    <mat-icon matPrefix>search</mat-icon>
    <input 
      matInput 
      (keyup)="applyFilter($event, activeTab)" 
      placeholder="Search..."
    />
  </mat-form-field>

  <div class="actions" *ngIf="activeTab === 'employees'">
    <button mat-raised-button color="primary" (click)="addEmployee()">
      <mat-icon>add</mat-icon>
      Add Employee
    </button>
  </div>
</div>

<mat-tab-group [(selectedIndex)]="activeTabIndex" (selectedTabChange)="onTabChange($event)">
  <mat-tab label="Clients">
    <app-data-table
      [dataSource]="clients"
      [displayedColumns]="['username','email','blocked']"
      [columnLabels]="{
        username: 'Username',
        email: 'Email',
        blocked: 'Blocked'
      }"
      [currentPage]="currentClientPage"
      [totalPages]="clientTotalPages"
      (previous)="paginatorClients.previousPage()"
      (next)="paginatorClients.nextPage()"
      (delete)="blockUnblockClient($event)">
    </app-data-table>
  </mat-tab>

  <mat-tab label="Employees">
    <app-data-table
      [dataSource]="employees"
      [displayedColumns]="['username','role']"
      [columnLabels]="{
        username: 'Username',
        role: 'Role'
      }"
      [currentPage]="currentEmployeePage"
      [totalPages]="employeeTotalPages"
      (previous)="paginatorEmployees.previousPage()"
      (next)="paginatorEmployees.nextPage()"
      (edit)="editEmployee($event)"
      (delete)="deleteEmployee($event.id)">
    </app-data-table>

    <div *ngIf="editingEmployee">
      <h3>Edit Employee</h3>
      <form (ngSubmit)="updateEmployee()">
        <input matInput placeholder="Username" [(ngModel)]="editingEmployee.username" name="username" required>
        <input matInput placeholder="First Name" [(ngModel)]="editingEmployee.firstName" name="firstName" required>
        <input matInput placeholder="Last Name" [(ngModel)]="editingEmployee.lastName" name="lastName" required>
        <input matInput placeholder="Role" [(ngModel)]="editingEmployee.role" name="role" required>
        <button mat-raised-button color="primary" type="submit">Save</button>
        <button mat-button type="button" (click)="editingEmployee=null">Cancel</button>
      </form>
    </div>
  </mat-tab>
</mat-tab-group>
